# 思维导图组件功能演示指南

## 🎯 核心功能展示

### 1️⃣ 拖拽节点 - 实时预览效果

#### 操作步骤
1. 打开思维导图页面：`http://localhost:5173/mind-map`
2. 按住任意节点不放（例如："前端开发"）
3. 开始移动鼠标

#### 预期效果
- ✅ 鼠标旁边出现蓝色预览卡片
- ✅ 卡片显示被拖拽节点的文本："前端开发"
- ✅ 下方显示提示文字："拖拽到目标节点以添加为子节点"
- ✅ 预览卡片跟随鼠标移动（偏移 10px）

#### 视觉特点
```
          📌 前端开发
    拖拽到目标节点以添加为子节点
          ↑
      跟随鼠标
```

---

### 2️⃣ 插入位置预览 - 多重视觉反馈

#### 操作步骤
1. 继续上一步的拖拽操作
2. 将鼠标移动到另一个节点上（例如："测试与优化"）
3. 悬停在目标节点上

#### 预期效果
目标节点"测试与优化"会显示：
- ✅ 蓝色虚线边框（带脉冲动画）
- ✅ 半透明蓝色背景高亮
- ✅ 右侧显示蓝色垂直插入线
- ✅ 插入线旁边显示蓝色箭头图标 ➜

#### 视觉布局
```
    ┌──────────────────┐
    │   测试与优化     │  |  ➜
    └──────────────────┘
         ↑
    蓝色高亮边框
```

---

### 3️⃣ 节点快捷操作 - 悬停显示按钮

#### 操作步骤
1. 将鼠标悬停在任意节点上（不拖拽）
2. 观察节点右侧变化

#### 预期效果
节点右侧出现两个按钮：
- ✅ 绿色 **+** 按钮（添加子节点）
- ✅ 红色 **×** 按钮（删除节点，根节点不显示）

#### 交互演示

**添加子节点：**
1. 悬停在"开发实施"节点上
2. 点击绿色 **+** 按钮
3. 立即在"开发实施"下方添加新子节点
4. 新节点自动命名为"新节点"

**删除节点：**
1. 悬停在"性能优化"节点上
2. 点击红色 **×** 按钮
3. 弹出确认对话框："确定要删除节点'性能优化'吗？"
4. 点击确定 → 节点被删除
5. 布局自动重新计算

---

### 4️⃣ 右键菜单 - 图标化菜单

#### 操作步骤
1. 右键点击任意节点（例如："前端开发"）
2. 查看弹出的菜单

#### 预期效果
显示美化的菜单：
```
┌────────────────────┐
│ ✏️  编辑节点        │ (蓝色背景悬停)
│ ➕  添加子节点      │ (绿色背景悬停)
│ ──────────────────  │ (分隔线)
│ 🗑️  删除节点        │ (红色背景悬停)
└────────────────────┘
```

#### 菜单功能
- **✏️ 编辑节点**：进入文本编辑模式
- **➕ 添加子节点**：快速添加子节点
- **🗑️ 删除节点**：删除当前节点（根节点不显示此项）

---

### 5️⃣ 完整拖拽流程演示

#### 场景：将"React 组件"移动到"测试与优化"下

**步骤 1：开始拖拽**
```
[前端开发]
    ├─ [React 组件] ← 按住不放
    └─ [样式设计]
```

**步骤 2：移动鼠标**
- 鼠标旁边显示：
  ```
  📌 React 组件
  拖拽到目标节点以添加为子节点
  ```

**步骤 3：悬停在目标节点**
```
[测试与优化]  |  ➜  ← 蓝色高亮 + 插入箭头
    ├─ [单元测试]
    └─ [集成测试]
```

**步骤 4：释放鼠标**
- 数据结构重组
- "React 组件"成为"测试与优化"的子节点
- 布局自动更新
- 连接线重新绘制

**结果：**
```
[前端开发]
    └─ [样式设计]

[测试与优化]
    ├─ [单元测试]
    ├─ [集成测试]
    └─ [React 组件] ← 新位置
```

---

## 🎨 视觉效果总结

### 颜色方案
| 元素 | 颜色 | 用途 |
|------|------|------|
| 根节点 | 蓝色 (#3B82F6) | 突出显示主题 |
| 一级节点 | 绿色 (#10B981) | 区分主要分支 |
| 二级及以下 | 灰色 (#E5E7EB) | 降低视觉干扰 |
| 拖拽预览 | 蓝色半透明 | 跟随反馈 |
| 插入提示 | 蓝色高亮 | 目标位置 |
| 添加按钮 | 绿色 (#10B981) | 正向操作 |
| 删除按钮 | 红色 (#EF4444) | 危险操作 |

### 动画效果
- ✅ 节点悬停：阴影增强（`hover:shadow-lg`）
- ✅ 插入高亮：脉冲动画（`animate-pulse`）
- ✅ 按钮交互：颜色过渡（`transition-colors`）
- ✅ 连接线：平滑更新（`transition-all duration-300`）

---

## 🖱️ 交互反馈矩阵

| 用户操作 | 视觉反馈 | 音频反馈 | 操作结果 |
|---------|---------|---------|---------|
| 悬停节点 | 阴影增强 + 快捷按钮显示 | - | 可以点击按钮 |
| 开始拖拽 | 预览卡片出现 | - | 准备移动 |
| 拖拽移动 | 预览跟随鼠标 | - | 实时位置 |
| 悬停目标 | 蓝色高亮 + 插入线 | - | 可以释放 |
| 释放鼠标 | 布局更新 + 连接线重绘 | - | 移动完成 |
| 点击 + 按钮 | 新节点出现 | - | 子节点创建 |
| 点击 × 按钮 | 确认对话框 | - | 等待确认 |
| 右键节点 | 菜单弹出 | - | 显示选项 |

---

## 📱 响应式设计

### 操作提示面板
- **桌面端**：左上角固定，宽度 max-w-xs
- **移动端**：可以优化为可收起面板

### 节点大小
- **默认宽度**：120px
- **默认高度**：40px
- **可配置**：通过 `useLayout` 的 config 参数调整

### 快捷按钮
- **尺寸**：6×6 单位（24px）
- **间距**：1 单位（4px）
- **响应式**：自动适应节点大小

---

## 🧪 测试清单

### 基础功能测试
- [ ] 拖拽节点，预览卡片跟随鼠标
- [ ] 悬停目标节点，显示插入位置提示
- [ ] 释放鼠标，节点成功移动
- [ ] 悬停节点，显示快捷按钮
- [ ] 点击 + 按钮，创建子节点
- [ ] 点击 × 按钮，删除节点（带确认）
- [ ] 右键节点，显示美化菜单
- [ ] 双击节点，进入编辑模式

### 边界情况测试
- [ ] 拖拽到自己 → 不允许
- [ ] 拖拽到后代节点 → 不允许（防止循环）
- [ ] 删除根节点 → × 按钮不显示
- [ ] 删除带子节点的节点 → 提示包含子节点
- [ ] 快速多次点击 + 按钮 → 创建多个子节点
- [ ] 拖拽过程中释放在空白处 → 取消操作

### 性能测试
- [ ] 节点数量 > 100，拖拽是否流畅
- [ ] 快速悬停多个节点，按钮显示是否正常
- [ ] 频繁展开/收缩，动画是否流畅

---

## 🎓 使用技巧

### 快速建图
1. 从根节点开始，悬停 → 点击 **+**
2. 创建一级节点后，继续悬停一级节点 → 点击 **+**
3. 逐层构建树形结构

### 快速调整结构
1. 拖拽节点到新位置，观察蓝色预览
2. 释放鼠标完成移动
3. 使用展开/收缩按钮整理视图

### 快速编辑
1. 双击节点进入编辑
2. 或右键 → ✏️ 编辑节点
3. 输入新文本 → 回车保存

### 快速删除
1. 悬停节点 → 点击 **×** 按钮
2. 或右键 → 🗑️ 删除节点
3. 确认对话框 → 确定

---

## 🚀 性能优化建议

### 大型思维导图（节点 > 500）
1. 启用虚拟滚动（仅渲染可见节点）
2. 使用 Canvas 代替 SVG（性能更好）
3. 实现节点懒加载

### 动画优化
1. 使用 CSS `will-change` 提示浏览器优化
2. 减少 DOM 操作，批量更新
3. 使用 `requestAnimationFrame` 控制动画帧率

---

## 📖 相关文档

- [组件开发总结](./MINDMAP_README.md)
- [使用文档](./MINDMAP_USAGE.md)
- [更新日志](./MINDMAP_UPDATES.md)

---

## 💡 反馈与建议

如果您有任何改进建议或发现问题，欢迎提出：
- 拖拽体验是否流畅？
- 视觉反馈是否清晰？
- 快捷操作是否便捷？
- 还需要哪些功能？
